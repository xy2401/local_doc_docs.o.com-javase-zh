<html lang="en-US" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>使用大对象（Java™教程&gt; JDBC（TM）数据库访问&gt; JDBC基础知识）</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
     <meta name="description" content="This JDBC Java tutorial describes how to use JDBC API to create, insert into, update, and query tables. You will also learn how to use simple and prepared statements, stored procedures and perform transactions"></meta>
     <meta name="keywords" content="java programming, learn java, java sample code, jdbc, prepared statement, result set"></meta>
        
<style type="text/css">body {
  margin-left: 10px;
  margin-right: 10px;
  line-height: 1.5;
  FONT-FAMILY: Arial,Helvetica,sans-serif;
  font-size: 0.8em;
}
a:link {
  text-decoration: none;
  color: #09569d;
}
a:visited {
  text-decoration: none;
  color: #3a87cf;
}
a:hover {
  text-decoration: underline;
}
code {
  font-family: Monaco,Courier,"Courier New";
}
.header-container {
  background-color: #fff;
  border-bottom: 1px solid #c1cfda;
  -webkit-box-shadow: 0 2px 2px rgba(117,163,231,0.1);
  box-shadow: 0 2px 2px rgba(117,163,231,0.1);
}
.bookwrapper {
  width: auto;
  margin: auto;
}
.clearfix {
}
.clearfloat {
  clear: both;
  overflow: auto;
  height: 0px;
  font-size: 1px;
  line-height: 0px;
}
#brandProdName {
  width: auto;
  height: auto;
}
#logocover {
  display: block;
  background: transparent url('../../images/oracle-java-logo.png') 0px 0px no-repeat;
  height: 50px;
  width: 229px;
  float: left;
}
#productName {
  font-size: 16px;
  position: relative;
  top: 19px;
  padding-left: 3px;
  color: #457798;
  white-space: nowrap;
  width: 340px;
}
.FigureCaption {
  font-family: sans-serif;
  text-align: center;
}
#TopBar_bl {
  width: 100%;
  height: 60px;
}
#TopBar_br {
  width: 100%;
  height: 60px;
}
#TopBar_tl {
  margin-left: -110px;
  margin-right: -100px;
  align: left;
  height: 60px;
}
#TopBar_tr {
  width: 100%;
  height: 60px;
}
#TopBar {
  min-width: 700px;
  padding: 25px 100px 10px;
  margin-bottom: 25px;
  clear: both;
  border-bottom: 1px solid #d2dde5;
  border-radius: 3px;
  background: #efefef;
  /* Old browsers */
  /* IE9 SVG, needs conditional override of 'filter' to 'none' */
  
  background: -moz-linear-gradient(top,#ffffff 0%,#e2eff9 100%);
  /* FF3.6+ */
  background: -webkit-gradient(linear,left top,left bottom,color-stop(0%,#ffffff),color-stop(100%,#e2eff9));
  /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top,#ffffff 0%,#e2eff9 100%);
  /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top,#ffffff 0%,#e2eff9 100%);
  /* Opera 11.10+ */
  background: -ms-linear-gradient(top,#ffffff 0%,#e2eff9 100%);
  /* IE10+ */
  background: linear-gradient(to bottom,#ffffff 0%,#e2eff9 100%);
  /* W3C */
  /* IE6-8 */
}
#TopBar_left {
  line-height: 14px;
  position: absolute;
  padding-top: 30px;
  padding-right: 30px;
  padding-left: 30px;
  text-align: left;
  font: 13px/20px Arial,Helvetica,sans-serif;
  font-weight: bold;
  font-size: 20px;
  color: #333;
}
#TopBar_right {
  line-height: 12px;
  float: right;
  padding-top: 10px;
  padding-right: 30px;
  text-align: left;
}
@media print {
  #BreadCrumbs, #Download {
    display: none;
  }
}
@media print {
  #TopBar_right {
    display: none;
  }
}
#TopBar_right a {
  font-size: 10px;
  margin: 3px;
  padding: 0;
}
#BreadCrumbs {
  padding: 15px 5px 0.5em 0;
  font-family: sans-serif;
  float: right;
}
#BreadCrumbs a {
  color: #09569d;
}
#BreadCrumbs a:visited, #BreadCrumbs a:link {
  text-decoration: none;
}
#BreadCrumbs a:hover, #BreadCrumbs a:active {
  text-decoration: underline;
}
#PageTitle {
  margin: 0 5px 0.5em 0;
  color: #f90000;
}
#PageContent {
  margin: 0 5px 0 20px;
}
.LeftBar_shown {
  width: 13em;
  float: left;
}
@media print {
  .LeftBar_shown {
    display: none;
  }
}
.LeftBar_hidden {
  display: none;
}
#Footer {
  padding-top: 10px;
  padding-left: 10px;
  margin-right: 10px;
}
.footertext {
  font-size: 10px;
  font-family: sans-serif;
  margin-top: 1px;
}
.NavBit {
  padding: 15px 5px 0.5em 0;
  font-family: sans-serif;
}
@media print {
  .NavBit {
    display: none;
  }
}
#TagNotes {
  text-align: right;
}
@media print {
  #TagNotes a:visited, #TagNotes a:link {
    color: #35556b;
    text-decoration: none;
  }
}
#Contents a, .NavBit a, #TagNotes a {
  color: #09569d;
}
#TagNotes a:visited, #TagNotes a:link, #Contents a:visited, #Contents a:link, .NavBit a:visited, .NavBit a:link {
  text-decoration: none;
}
#TagNotes a:hover, #TagNotes a:active, #Contents a:hover, #Contents a:active, .NavBit a:hover, .NavBit a:active {
  text-decoration: underline;
}
#Contents {
  float: left;
  font-family: sans-serif;
}
@media print {
  #Contents {
    display: none;
  }
}
@media screen {
  div.PrintHeaders {
    display: none;
  }
}
.linkLESSON, .nolinkLESSON {
  margin-left: 0.5em;
  text-indent: -0.5em;
}
.linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS {
  margin-left: 1.5em;
  text-indent: -0.5em;
}
.linkBHEAD, .nolinkBHEAD {
  margin-left: 2.5em;
  text-indent: -0.5em;
}
.linkCHEAD, .nolinkCHEAD {
  margin-left: 3.5em;
  text-indent: -0.5em;
}
.nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD, .nolinkQUESTIONS {
  font-weight: bold;
  color: #333;
}
.MainFlow_indented {
  margin-right: 10px;
  margin-left: 15em;
  margin-bottom: 2em;
}
.MainFlow_wide {
  margin-right: 10px;
  margin-left: 10px;
  margin-bottom: 2em;
}
@media print {
  .MainFlow_indented, .MainFlow_wide {
    padding-top: 0;
    margin-top: 10px;
    margin-right: 10px;
    margin-left: 0;
  }
}
h1, h2, h3, h4, h5 {
  color: #333;
}
h1 {
  font-weight: bold;
  font-size: 20px;
}
h2 {
  font-weight: bold;
  font-size: 17px;
}
h3 {
  font-weight: bold;
  font-size: 14px;
}
h4 {
  font-size: 15px;
}
h5 {
  font-size: 12px;
}
#ToggleLeft {
  display: none;
}
.note {
  margin: 0 30px 0px 30px;
}
.codeblock {
  margin: 0 30px 0px 30px;
  font-size: 12px;
  font-family: Monaco,Courier,"Courier New";
}
.tocli {
  list-style-type: none;
}
.betadraft {
  color: red;
}
</style>
<script type="text/javascript">
/* <![CDATA[ */
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }

    function showCode(displayCodePage, codePath) {
        var codePathEls = codePath.split("/");
        var currDocPathEls = location.href.split("/");
        //alert ("codePathEls = " + codePathEls + "n" + "currDocPathEls = " + currDocPathEls);
        currDocPathEls.pop(); // remove file name at the end
        while (codePathEls.length > 0) {
            if (codePathEls[0] == "..") {
                codePathEls.shift();
                currDocPathEls.pop();
            } else {
                break;
            }
        }
        var fullCodePath = currDocPathEls.join("/") + "/" + codePathEls.join("/");
        //alert ("fullCodePath = " + fullCodePath );
        if (codePath.indexOf(".java") != -1 || codePath.indexOf(".jnlp") != -1) {
            window.location.href = displayCodePage + "?code=" + encodeURI(fullCodePath);
        } else {
            window.location.href = fullCodePath;
        }
    }
/* ]]> */    
</script>


    <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body dir="ltr" onload="load()">
    <noscript>启用了JavaScript的浏览器需要此页面正常运行。
    </noscript>
        <!-- header -->
    <div class="header-container">
        <div class="bookwrapper  clearfix">       
            <div id="brandProdName">
                <div id="logocover"></div>
                <div id="productName">文档</div>
            </div> 
            <br class="clearfloat">
        </div>
    </div>
    
    <div id="TopBar">
        <div id="TopBar_tr">
            <div id="TopBar_tl">
                <div id="TopBar_br"> <div id="TopBar_bl"> 
                    <div id="TopBar_left">Java™教程</div>
                        <div id="TopBar_right"> 
                            <!--
                            <a href="URL" target="_blank">External Link</a><br/>
                            --> <a href="javascript:void(0);" id="ToggleLeft">隐藏TOC</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="LeftBar" class="LeftBar_shown">
        <div id="Contents">
            <div class="linkLESSON"><a href="index.html">JDBC基础知识</a></div>
<div class="linkAHEAD"><a href="gettingstarted.html">入门</a></div>
<div class="linkAHEAD"><a href="processingsqlstatements.html">使用JDBC处理SQL语句</a></div>
<div class="linkAHEAD"><a href="connecting.html">建立连接</a></div>
<div class="linkAHEAD"><a href="sqldatasources.html">连接数据源对象</a></div>
<div class="linkAHEAD"><a href="sqlexception.html">处理SQLExceptions</a></div>
<div class="linkAHEAD"><a href="tables.html">设置表</a></div>
<div class="linkAHEAD"><a href="retrieving.html">从结果集中检索和修改值</a></div>
<div class="linkAHEAD"><a href="prepared.html">使用准备好的陈述</a></div>
<div class="linkAHEAD"><a href="transactions.html">使用交易</a></div>
<div class="linkAHEAD"><a href="rowset.html">使用RowSet对象</a></div>
<div class="linkAHEAD"><a href="jdbcrowset.html">使用JdbcRowSet对象</a></div>
<div class="linkAHEAD"><a href="cachedrowset.html">使用CachedRowSetObjects</a></div>
<div class="linkAHEAD"><a href="joinrowset.html">使用JoinRowSet对象</a></div>
<div class="linkAHEAD"><a href="filteredrowset.html">使用FilteredRowSet对象</a></div>
<div class="linkAHEAD"><a href="webrowset.html">使用WebRowSet对象</a></div>
<div class="linkAHEAD"><a href="sqltypes.html">使用高级数据类型</a></div>
<div class="nolinkAHEAD">使用大对象</div>
<div class="linkAHEAD"><a href="sqlxml.html">使用SQLXML对象</a></div>
<div class="linkAHEAD"><a href="array.html">使用数组对象</a></div>
<div class="linkAHEAD"><a href="distinct.html">使用DISTINCT数据类型</a></div>
<div class="linkAHEAD"><a href="sqlstructured.html">使用结构化对象</a></div>
<div class="linkAHEAD"><a href="sqlcustommapping.html">使用自定义类型映射</a></div>
<div class="linkAHEAD"><a href="sqldatalink.html">使用数据链接对象</a></div>
<div class="linkAHEAD"><a href="sqlrowid.html">使用RowId对象</a></div>
<div class="linkAHEAD"><a href="storedprocedures.html">使用存储过程</a></div>
<div class="linkAHEAD"><a href="jdbcswing.html">将JDBC与GUI API结合使用</a></div>
</div>
    </div>
    <div id="MainFlow" class="MainFlow_indented">
    <div class="PrintHeaders">
        <b>Trail：</b> JDBC（TM）数据库访问<br><b>课程：</b> JDBC基础知识</div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">主页</a> &gt; <a href="../index.html" target="_top">JDBC（TM）数据库访问</a> &gt; <a href="index.html" target="_top">JDBC基础知识</a>
            </div>
            <div class="NavBit">
                <a href="sqltypes.html" target="_top">«上一页</a> • <a href="../TOC.html" target="_top">小道</a> • <a href="sqlxml.html" target="_top">下一页»</a>
            </div>
            <div class="Banner"><p style="background-color:rgb(247,248,249);border-width:1px;padding:10px;font-style:italic;border-style:solid;border-color:rgb(64,74,91)">Java教程是为JDK 8编写的。本页中描述的示例和实践未利用后续版本中引入的改进。</p></div>
            <div id="PageTitle"><h1>使用大对象</h1></div>
            <div id="PageContent">

<!-- Using Large Objects -->
<p><code>Blob</code> ， <code>Clob</code>和<code>NClob</code> Java对象的一个​​重要特性是您可以操作它们，而无需将所有数据从数据库服务器带到客户端计算机。某些实现表示这些类型的实例，其中包含实例所代表的数据库中对象的定位符（逻辑指针）。由于<code>BLOB</code> ， <code>CLOB</code>或<code>NCLOB</code> SQL对象可能非常大，因此使用定位器可以显着提高性能。但是，其他实现完全实现了客户端计算机上的大对象。</p>
<p>如果要将<code>BLOB</code> ， <code>CLOB</code>或<code>NCLOB</code> SQL值的数据带到客户端计算机，请使用为此目的提供的<code>Blob</code> ， <code>Clob</code>和<code>NClob</code> Java接口中的方法。这些大对象类型对象实现了它们表示为流的对象的数据。</p>
<p>涵盖以下主题：</p>
<ul>
<li><a href="#add_lob">将大对象类型对象添加到数据库</a></li>
<li><a href="#retrieve_clob">检索CLOB值</a></li>
<li><a href="#add_retrieve_blob">添加和检索BLOB对象</a></li>
<li><a href="#release_large_objects">释放大对象所持有的资源</a></li>
</ul>
<h2><a name="add_lob" id="add_lob">将大对象类型对象添加到数据库</a></h2>
<p>以下摘录自<code><a href="gettingstarted.html">ClobSample.addRowToCoffeeDescriptions</a></code>将<code>CLOB</code> SQL值添加到表<code>COFFEE_DESCRIPTIONS</code> 。 <code>Clob</code> Java对象<code>myClob</code>包含<code>fileName</code>指定的文件的内容。</p>
<div class="codeblock"><pre>public void addRowToCoffeeDescriptions（String coffeeName，String fileName）抛出SQLException {PreparedStatement pstmt = null;尝试{Clob myClob = this.con.createClob（）; Writer clobWriter = myClob.setCharacterStream（1）; String str = this.readFile（fileName，clobWriter）; System.out.println（“写下面的代码：”+ clobWriter.toString（））; if（this.settings.dbms.equals（“mysql”））{System.out.println（“MySQL，在Clob中设置String”+“with setString方法的对象”）; myClob.setString（1，str）; System.out.println（“Clob的长度：”+ myClob.length（））; String sql =“INSERT INTO COFFEE_DESCRIPTIONS”+“VALUES（？，？）“;; pstmt = this.con.prepareStatement（sql）; pstmt.setString（1，coffeeName）; pstmt.setClob（2，myClob）; pstmt.executeUpdate（）;} catch（SQLException sqlex）{JDBCTutorialUtilities.printSQLException（sqlex） ;}（Exception ex）{System.out.println（“意外异常：”+ ex.toString（））;} finally {if（pstmt！= null）pstmt.close（）; }}</pre></div>
<p>以下行创建一个<code>Clob</code> Java对象：</p>
<div class="codeblock"><pre>Clob myClob = this.con.createClob（）;</pre></div>
<p>以下行检索用于将字符流写入<code>Clob</code> Java对象<code>myClob</code>的流（在本例中为名为<code>clobWriter</code>的<code>Writer</code>对象）。方法<code>ClobSample.readFile</code>写入这个字符流;流来自<code>String</code> <code>fileName</code>指定的文件。方法参数<code>1</code>表示<code>Writer</code>对象将开始在<code>Clob</code>值的开头写入字符流：</p>
<div class="codeblock"><pre>Writer clobWriter = myClob.setCharacterStream（1）;</pre></div>
<p><code>ClobSample.readFile</code>方法<code>ClobSample.readFile</code>读取文件<code>fileName</code>指定的文件，并将其写入<code>writerArg</code>指定的<code>Writer</code>对象：</p>
<div class="codeblock"><pre>private String readFile（String fileName，Writer writerArg）抛出FileNotFoundException，IOException {BufferedReader br = new BufferedReader（new FileReader（fileName））; String nextLine =“”; StringBuffer sb = new StringBuffer（）; while（（nextLine = br.readLine（））！= null）{System.out.println（“Writing：”+ nextLine）; writerArg.write（nextLine）; sb.append（nextLine）; } //将内容转换为字符串String clobData = sb.toString（）; //返回数据return clobData; }</pre></div>
<p>以下摘录创建了一个<code>PreparedStatement</code>对象<code>pstmt</code> ，它将<code>Clob</code> Java对象<code>myClob</code>插入到<code>COFFEE_DESCRIPTIONS</code> ：</p>
<div class="codeblock"><pre>PreparedStatement pstmt = null; // ...String sql =“INSERT INTO COFFEE_DESCRIPTIONS VALUES（？，？）“;; pstmt = this.con.prepareStatement（sql）; pstmt.setString（1，coffeeName）; pstmt.setClob（2，myClob）; pstmt.executeUpdate（）;</pre></div>
<h2><a name="retrieve_clob" id="retrieve_clob">检索CLOB值</a></h2>
<p>该方法<code><a href="gettingstarted.html">ClobSample.retrieveExcerpt</a></code>检索<code>CLOB</code>存储在SQL值<code>COF_DESC</code>的柱<code>COFFEE_DESCRIPTIONS</code>从其列值的行<code>COF_NAME</code>等于<code>String</code>被指定的数值<code>coffeeName</code>参数：</p>
<div class="codeblock"><pre>public String retrieveExcerpt（String coffeeName，int numChar）throws SQLException {String description = null; Clob myClob = null; PreparedStatement pstmt = null;尝试{String sql =“从COFFEE_DESCRIPTIONS中选择COF_DESC”+“+”，其中COF_NAME =？“;; pstmt = this.con.prepareStatement（sql）; pstmt.setString（1，coffeeName）; ResultSet rs = pstmt.executeQuery（）; if（rs.next（））{myClob = rs.getClob（1）; System .out.println（“检索到的Clob的长度：”+ myClob.length（））;} description = myClob.getSubString（1，numChar）;} catch（SQLException sqlex）{JDBCTutorialUtilities.printSQLException（sqlex）;} catch（异常） ex）{System.out.println（“意外异常：”+ ex.toString（））;} finally {if（pstmt！= null）pstmt.close（）; } return description; }</pre></div>
<p>以下行从<code>ResultSet</code>对象<code>rs</code>检索<code>Clob</code> Java值：</p>
<div class="codeblock"><pre>myClob = rs.getClob（1）;</pre></div>
<p>以下行从<code>myClob</code>对象中检索子字符串。子字符串从<code>myClob</code>值的第一个字符开始，最多为<code>numChar</code>指定的连续字符数，其中<code>numChar</code>是一个整数。</p>
<div class="codeblock"><pre>description = myClob.getSubString（1，numChar）;</pre></div>
<h2><a name="add_retrieve_blob" id="add_retrieve_blob">添加和检索BLOB对象</a></h2>
<p>添加和检索<code>BLOB</code> SQL对象与添加和检索<code>CLOB</code> SQL对象类似。使用<code>Blob.setBinaryStream</code>方法检索<code>OutputStream</code>对象以写入<code>Blob</code> Java对象（称为方法）表示的<code>BLOB</code> SQL值。</p>
<h2><a name="release_large_objects" id="release_large_objects">释放大对象所持有的资源</a></h2>
<p><code>Blob</code> ， <code>Clob</code>和<code>NClob</code> Java对象至少在创建它们的事务期间保持有效。这可能会导致应用程序在长时间运行的事务中耗尽资源。应用程序可以通过调用其<code>free</code>方法来释放<code>Blob</code> ， <code>Clob</code>和<code>NClob</code>资源。</p>
<p>在下面的摘录中，调用方法<code>Clob.free</code>来释放为先前创建的<code>Clob</code>对象保存的资源：</p>
<div class="codeblock"><pre>Clob aClob = con.createClob（）; int numWritten = aClob.setString（1，val）; aClob.free（）;</pre></div>


        </div>
        <div class="NavBit">
            <a href="sqltypes.html" target="_top">«上一页</a> • <a href="../TOC.html" target="_top">小道</a> • <a href="sqlxml.html" target="_top">下一页»</a>
        </div>
    </div>
    
<hr class="clearfloat">

<div id="Footer">

<p class="footertext">
<a href="http://www.oracle.com/corporate/index.html">关于Oracle</a> | <a href="http://www.oracle.com/us/corporate/contact/index.html">联系我们</a> | <a href="http://www.oracle.com/us/legal/index.html">法律声明</a> | <a href="http://www.oracle.com/us/legal/terms/index.html">使用条款</a> | <a href="http://www.oracle.com/us/legal/privacy/index.html">您的隐私权</a></p>

<p class="footertext"><a href="http://www.oracle.com/pls/topic/lookup?ctx=cpyr&amp;id=en-US">版权所有©1995,2017 Oracle和/或其附属公司。版权所有。</a></p>
       
</div>    
    <div class="PrintHeaders">
        <b>上一页：</b>使用高级数据类型<br><b>下一页：</b>使用SQLXML对象</div>
<!-- Start SiteCatalyst code -->
<script type="application/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_docs.js"></script>
<!-- End SiteCatalyst code --> 
</body>
</html>